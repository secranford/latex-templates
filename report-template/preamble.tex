%===============================Preamble====================================
% include packages and define commands 

\usepackage[utf8]{inputenc} % for utf-8 encoding, use this for all files
\usepackage[T1]{fontenc} % for T1 font encoding, use this for all files


% Geometry Package for Page Layout
% Adjusts the page size and margins to the specified dimensions.
\usepackage[margin=1in,includehead]{geometry} %6.5x9in frame size, 1in margins, include head in margin

\usepackage{hyperref}
\hypersetup{%set pdf metadata here
    pdftitle={Turb-Final},
    pdfauthor={Sean Cranford},
    pdfsubject={Turbulence},
    pdfkeywords={Turbulence},
    colorlinks=true, % links show up as set colors
    linkcolor=LinkColor, % link color for internal quantities, i.e. figs
    citecolor=LinkColor, % link color for citations
    urlcolor=LinkColor,  % link color for URL (and DOI)
    linktoc=all, % all parts of toc are links, i.e. page and section
    bookmarksnumbered=true % bookmarks are numbered in pdf tree
}

% PSTricks for Graphics and 3D Objects
% Provides commands to create 3D graphics and repetitive commands.
\usepackage{pst-3d,multido}

% Titlesec for Section Formatting
% Customizes the format of section titles with specific font and spacing.
\usepackage{titlesec}
\titleformat{\section}
{\normalfont\Large\bfseries}{\thesection}{1em}{}[{\titlerule[1.5pt]}]

% Epigraph for Quotes
% Allows the inclusion of epigraphs (quotes) at the beginning of sections.
\usepackage{epigraph}
% make epigraph fill most of the text width
\setlength\epigraphwidth{\textwidth}
% reduce the default indent from the right
\setlength\epigraphrule{0pt}
% choose how far down the page the epigraph starts
\renewcommand{\epigraphsize}{\LARGE}

\usepackage{pst-all}
\usepackage{pstricks-add}



% AMS Math and Symbols
% Provides extended math environments and bold math symbols.
\usepackage{amsmath,amsfonts,amsthm,amssymb,mathtools,bm}
\usepackage[varbb]{newpxmath} % uses pxmath's varbb 

% Graphics Package
% Required for including images in the document.
\usepackage{graphicx}

% Float for Controlling Figure Placement
% Provides more control over the placement of figures and tables.
\usepackage{float}

\usepackage{tikz} % for drawing

% Subcaption for Subfigures
% Allows the inclusion of subfigures with captions.
\usepackage{subcaption}

\usepackage{multicol,array} % for multi-column pages and better tables
\usepackage{booktabs} % Pretty tables, provides \toprule, \midrule, \bottomrule

\usepackage{bookmark} % helps with pdf bookmarks

% Xcolor for Color Text
% Enables color in text and other document elements.
\usepackage[svgnames,x11names]{xcolor}

\usepackage{cleveref} %clever references, must be loaded after amsath
\let\cite\relax % dont overwrite cite macro with cleveref

\usepackage[numbers,sort&compress]{natbib} %numbers generated by cite, sort&compress handles [1-3] for example

% Overpic for Overlaying Graphics
% Allows placing text over images.
\usepackage{overpic}

% % Gensymb for Special Symbols
% % Provides generic symbols like degrees, micro, etc.
% \usepackage{textcomp,gensymb} %importing textomp first gets rid of thousand and micro warning

% Lipsum for Placeholder Text
% Generates filler text for testing.
\usepackage{lipsum}

% SIUnitx for Scientific Units
% Provides tools for typesetting SI units and numbers.
\usepackage{siunitx}



% aiaa biblatex style has formatting errors, it can also be better to use bibtex styles since journals still use the legacy templates
% Biblatex for Bibliography Management
% Handles bibliography and citations, with a specified sorting order.
%\usepackage[ % needed for bibliography
%        backend=biber, % use biber for bibliography
%        style=aiaa, % citations fail if no style is given, new-aiaa is a bibtex style file and you must download it to use but then you cannot use biber
%        sorting=none, % sort by order of appearance, IEEE
%        sortcites=true % compress mult citations within a single bracket if style allows
%]{biblatex} % WILL CAUSE ERRORS IF NO BIB FILE IS GIVEN



% TOCbibind for TOC and Bibliography
% Adds the bibliography to the Table of Contents (TOC).
\usepackage[nottoc]{tocbibind}

% Nomencl for Nomenclature
% Manages nomenclature (terms and symbols) used in the document.
\usepackage[intoc, english]{nomencl}

% Listings for Code
% Formats code snippets in the document.
\usepackage{listings}

\usepackage{chngcntr} % for changing page counter
\usepackage[onehalfspacing]{setspace} % for line spacing



% ***IMPORTANT, this is needed for the separate file usage***
\usepackage{import} % for importing files, no need to set path prefix for subdir if import is used

% FANCY HEADER SETUP
\usepackage{fancyhdr} % for custom headers and footers

\setlength{\headheight}{15pt} % vertical space for header
\pagestyle{fancy} % Use the 'fancy' page style
\fancyhf{} % Clear all header and footer fields

%---------- One-Sided Header/Footer Setup ----------
\fancyhead[LO]{\textbf{\rightmark}} % Section title on the top left
\fancyhead[RO]{\thepage}            % Page number on the top right

%---------- Plain Page Style (e.g. title, chapter start) ----------
\fancypagestyle{plain}{
    \fancyhf{}                       % Clear header and footer
    \fancyfoot[C]{\thepage}         % Page number at bottom center
    \renewcommand{\headrulewidth}{0pt} % No header line
    \renewcommand{\footrulewidth}{0pt} % No footer line
}

\usepackage{etoolbox}
\pretocmd{\section}{\clearpage\thispagestyle{plain}}{}{} % Ensures that each section starts on a new page with the plain page style